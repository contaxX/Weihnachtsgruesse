<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>contaxX ¬∑ Weihnachtsgr√º√üe</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Cormorant+Garamond:wght@400;500;600&display=swap" rel="stylesheet">

<style>
  :root{
    --gold:#f5d6a4;
    --gold2:#ffdcae;
    --warm:#fff6ea;
    --bg:#060816;
    --card:#0f1433;
    --ink:rgba(255,245,235,.94);
    --muted:rgba(255,245,235,.82);
    --red:#b3192a;
    --red2:#d12a3b;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    min-height:100vh;
    background:
      radial-gradient(circle at top, #35418a 0%, #0b0f1f 55%, #000 100%);
    font-family:"Cormorant Garamond", serif;
    color:var(--ink);
    overflow-x:hidden;
  }

  /* üéÑ Mehr weihnachtlicher Hintergrund: Bokeh/Glitzer */
  .bokeh{
    position:fixed; inset:0; pointer-events:none; z-index:0;
    background-image:
      radial-gradient(120px 120px at 12% 18%, rgba(255,220,170,.12), transparent 60%),
      radial-gradient(160px 160px at 82% 22%, rgba(245,214,164,.10), transparent 62%),
      radial-gradient(180px 180px at 65% 78%, rgba(255,160,170,.08), transparent 65%),
      radial-gradient(140px 140px at 20% 86%, rgba(245,214,164,.08), transparent 64%);
    filter: blur(1px);
    opacity:1;
  }

  /* ‚ùÑÔ∏è Schnee (verst√§rkt) */
  .snow{position:fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden;}
  .flake{
    position:absolute; top:-10%;
    width:6px; height:6px; border-radius:999px;
    background:rgba(255,255,255,.20);
    box-shadow:0 0 10px rgba(255,255,255,.10);
    animation:fall linear infinite;
  }
  @keyframes fall{
    0%{transform:translateY(-10vh) translateX(0); opacity:0}
    10%{opacity:.85}
    100%{transform:translateY(110vh) translateX(60px); opacity:0}
  }

  /* ‚ú® Lichterkette oben (mehr bulbs) */
  .lights{position:fixed; top:0; left:0; right:0; height:84px; pointer-events:none; z-index:1;}
  .wire{
    position:absolute; top:26px; left:-5%;
    width:110%; height:2px;
    background:linear-gradient(90deg, transparent, rgba(245,214,164,.55), transparent);
  }
  .bulb{
    position:absolute; top:34px;
    width:10px; height:10px; border-radius:999px;
    background:rgba(255,255,255,.35);
    box-shadow:0 0 16px rgba(255,220,170,.85);
    animation:tw 2.6s ease-in-out infinite;
  }
  @keyframes tw{0%,100%{opacity:.40;transform:scale(1)}50%{opacity:1;transform:scale(1.25)}}
  .bulb:nth-child(2){left:6%;  animation-delay:.2s}
  .bulb:nth-child(3){left:14%; animation-delay:1.1s}
  .bulb:nth-child(4){left:22%; animation-delay:.6s}
  .bulb:nth-child(5){left:30%; animation-delay:1.6s}
  .bulb:nth-child(6){left:38%; animation-delay:.9s}
  .bulb:nth-child(7){left:46%; animation-delay:1.9s}
  .bulb:nth-child(8){left:54%; animation-delay:1.0s}
  .bulb:nth-child(9){left:62%; animation-delay:2.1s}
  .bulb:nth-child(10){left:70%; animation-delay:.7s}
  .bulb:nth-child(11){left:78%; animation-delay:1.7s}
  .bulb:nth-child(12){left:86%; animation-delay:.4s}
  .bulb:nth-child(13){left:94%; animation-delay:1.3s}

  /* üéÅ Deko-Kugeln gro√ü/soft */
  .ornaments{position:fixed; inset:0; pointer-events:none; z-index:0;}
  .orn{
    position:absolute; border-radius:999px;
    background:radial-gradient(circle at 30% 25%, rgba(255,255,255,.22), rgba(245,214,164,.10) 45%, rgba(0,0,0,0) 72%);
    border:1px solid rgba(245,214,164,.18);
    opacity:.55;
  }
  .orn::after{
    content:""; position:absolute; top:-16px; left:50%; transform:translateX(-50%);
    width:32px; height:16px; border-radius:8px 8px 4px 4px;
    border:1px solid rgba(245,214,164,.25);
    background:rgba(0,0,0,.15);
  }
  .orn.one{top:10%; left:-60px; width:210px; height:210px; opacity:.45}
  .orn.two{top:55%; right:-70px; width:250px; height:250px; opacity:.35}
  .orn.three{bottom:-80px; left:18%; width:280px; height:280px; opacity:.25}

  .wrap{
    max-width:980px;
    margin:0 auto;
    padding:32px 16px 64px;
    position:relative;
    z-index:2;
  }

  header{
    display:flex;
    justify-content:center;
    margin:14px 0 22px;
  }
  header img{height:56px; display:block}

  /* üîä Sound Toggle */
  .sound{
    position:fixed;
    right:14px;
    bottom:14px;
    z-index:5;
    border:1px solid rgba(245,214,164,.35);
    background:rgba(0,0,0,.25);
    color:rgba(245,214,164,.92);
    font-family: "Cormorant Garamond", serif;
    padding:10px 12px;
    border-radius:12px;
    cursor:pointer;
    font-size:14px;
    letter-spacing:.02em;
    user-select:none;
  }
  .sound small{opacity:.8; display:block; font-size:12px; margin-top:2px}

  /* B√ºhne */
  .stage{display:flex; justify-content:center; padding:10px 0 0;}
  .scene{
    width:min(620px, 94vw);
    position:relative;
    padding-top:20px;
  }

  /* Kuvert-Container */
  .envelopeWrap{
    position:relative;
    height:520px;
    display:flex;
    justify-content:center;
    align-items:flex-end;
  }

  /* Karte (wird am Ende allein gezeigt) */
  .cardOnly{
    display:none;
    width:100%;
    border-radius:22px;
    border:1px solid rgba(245,214,164,.35);
    background:linear-gradient(180deg, rgba(15,20,51,.97), rgba(8,10,22,.97));
    box-shadow:0 26px 90px rgba(0,0,0,.65), 0 0 42px rgba(245,214,164,.10);
    overflow:hidden;
  }
  .cardInner{padding:38px 30px 28px}
  .title{
    font-family:"Great Vibes", cursive;
    font-size:62px;
    line-height:1.03;
    text-align:center;
    color:var(--gold2);
    text-shadow:0 6px 26px rgba(0,0,0,.45);
  }
  .sub{
    margin-top:14px;
    text-align:center;
    font-size:22px;
    line-height:1.7;
    color:var(--muted);
  }
  .grid{
    margin-top:22px;
    display:grid;
    grid-template-columns: 1.05fr .95fr;
    gap:18px;
    align-items:stretch;
  }
  .photo{
    border-radius:16px;
    overflow:hidden;
    border:1px solid rgba(245,214,164,.22);
    background:rgba(0,0,0,.18);
  }
  .photo img{width:100%; height:100%; object-fit:cover; display:block}
  .letter{
    border-radius:16px;
    border:1px solid rgba(245,214,164,.22);
    background:rgba(0,0,0,.20);
    padding:20px 18px 16px;
  }
  .letter h2{
    font-size:24px;
    color:var(--gold2);
    margin-bottom:10px;
  }
  .letter p{
    font-size:19px;
    line-height:1.7;
    margin-bottom:10px;
    color:var(--muted);
  }
  footer{
    margin-top:18px;
    text-align:center;
    font-size:13px;
    color:rgba(245,214,164,.72);
    letter-spacing:.02em;
  }

  /* ‚úâÔ∏è Kuvert (gr√∂√üer, sch√∂ner) */
  .envelope{
    width:100%;
    height:340px;
    position:relative;
    border-radius:18px;
    background:linear-gradient(135deg, #d8b277, #f5d6a4);
    box-shadow:0 26px 90px rgba(0,0,0,.60);
    border:1px solid rgba(0,0,0,.10);
    overflow:hidden;
    cursor:pointer;
    user-select:none;
  }

  /* Inneres Muster (weihnachtlich, sehr subtil) */
  .envelope::before{
    content:"";
    position:absolute; inset:0;
    background-image:
      radial-gradient(10px 10px at 15% 30%, rgba(255,255,255,.18) 35%, transparent 36%),
      radial-gradient(12px 12px at 78% 44%, rgba(255,255,255,.16) 35%, transparent 36%),
      radial-gradient(8px 8px at 45% 70%, rgba(255,255,255,.14) 35%, transparent 36%);
    opacity:.25;
    pointer-events:none;
  }

  /* Klappe */
  .flap{
    position:absolute; top:0; left:0; right:0; height:58%;
    background:linear-gradient(135deg, #caa468, #efcf9c);
    clip-path:polygon(0 0, 100% 0, 50% 88%);
    transform-origin:top center;
    transition:transform .9s cubic-bezier(.2,1,.25,1);
    border-bottom:1px solid rgba(0,0,0,.08);
    z-index:2;
  }

  /* Faltungen */
  .fold{
    position:absolute; inset:auto 0 0 0; height:78%;
    background:
      linear-gradient(135deg, rgba(0,0,0,.08), rgba(0,0,0,0)),
      linear-gradient(225deg, rgba(0,0,0,.08), rgba(0,0,0,0));
    clip-path:polygon(0 0, 50% 50%, 100% 0, 100% 100%, 0 100%);
    opacity:.55;
    z-index:1;
  }

  /* üéÄ Rote Schleife statt Siegel */
  .ribbon{
    position:absolute;
    left:50%;
    top:54%;
    transform:translate(-50%,-50%);
    width:110px;
    height:110px;
    z-index:3;
    transition:transform .35s ease, opacity .35s ease;
  }
  .ribbon .knot{
    position:absolute;
    left:50%; top:50%;
    transform:translate(-50%,-50%);
    width:22px; height:22px;
    border-radius:999px;
    background:radial-gradient(circle at 30% 25%, rgba(255,255,255,.25), rgba(0,0,0,.12) 60%);
    border:1px solid rgba(0,0,0,.12);
  }
  .ribbon .loop{
    position:absolute; top:50%;
    width:54px; height:36px;
    border-radius:18px 18px 18px 18px;
    background:linear-gradient(135deg, var(--red2), var(--red));
    border:1px solid rgba(0,0,0,.10);
    box-shadow:0 8px 18px rgba(0,0,0,.25);
  }
  .ribbon .loop.left{left:12px; transform:translateY(-50%) rotate(-10deg)}
  .ribbon .loop.right{right:12px; transform:translateY(-50%) rotate(10deg)}
  .ribbon .tail{
    position:absolute; bottom:6px;
    width:18px; height:56px;
    background:linear-gradient(180deg, var(--red2), var(--red));
    border:1px solid rgba(0,0,0,.10);
    box-shadow:0 8px 18px rgba(0,0,0,.18);
  }
  .ribbon .tail.left{left:40px; transform:rotate(12deg); clip-path:polygon(0 0, 100% 0, 100% 92%, 50% 100%, 0 92%)}
  .ribbon .tail.right{right:40px; transform:rotate(-12deg); clip-path:polygon(0 0, 100% 0, 100% 92%, 50% 100%, 0 92%)}

  .envText{
    position:absolute; inset:0;
    display:flex; align-items:center; justify-content:center;
    padding:0 22px;
    text-align:center;
    font-size:30px;
    color:#2b1c0f;
    letter-spacing:.02em;
    z-index:0;
  }

  .hint{
    margin-top:14px;
    text-align:center;
    font-size:13px;
    color:rgba(245,214,164,.78);
    letter-spacing:.08em;
    text-transform:uppercase;
  }

  /* --- Animation Sequenz (3 Phasen) --- */
  /* 1) Schleife l√∂st sich */
  .scene.phase-untie .ribbon{
    transform:translate(-50%,-50%) scale(.92) rotate(-6deg);
    opacity:.15;
  }

  /* 2) Klappe √∂ffnet */
  .scene.phase-open .flap{
    transform:rotateX(170deg);
  }

  /* 3) Andeutung ‚ÄûKarte kommt raus‚Äú (kurz) */
  .peek{
    position:absolute;
    left:5%;
    right:5%;
    bottom:90px;
    height:210px;
    border-radius:18px;
    border:1px solid rgba(245,214,164,.30);
    background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.18));
    box-shadow:0 18px 55px rgba(0,0,0,.35);
    transform:translateY(170px);
    opacity:0;
    transition:transform .8s cubic-bezier(.2,1,.25,1), opacity .35s ease;
    z-index:2;
    overflow:hidden;
  }
  .peek::before{
    content:"";
    position:absolute; inset:0;
    background:
      radial-gradient(circle at 20% 20%, rgba(245,214,164,.20), transparent 60%),
      radial-gradient(circle at 80% 40%, rgba(255,180,190,.10), transparent 62%);
  }
  .peekMark{
    position:absolute;
    top:22px; left:22px;
    font-family:"Great Vibes", cursive;
    font-size:34px;
    color:rgba(245,214,164,.85);
  }

  .scene.phase-peek .peek{
    transform:translateY(-40px);
    opacity:1;
  }

  /* 4) √úbergang: ‚Äûdreht/zoomt‚Äú in Karte */
  .scene.phase-reveal .envelopeWrap{
    animation:spinAway .75s ease forwards;
  }
  @keyframes spinAway{
    to{transform:scale(.92) rotateY(16deg); opacity:0}
  }
  .scene.phase-reveal .cardOnly{
    display:block;
    animation:cardIn .9s cubic-bezier(.2,1,.25,1) forwards;
  }
  @keyframes cardIn{
    from{opacity:0; transform:translateY(18px)}
    to{opacity:1; transform:none}
  }

  @media (max-width: 720px){
    .title{font-size:48px}
    .sub{font-size:19px}
    .grid{grid-template-columns:1fr}
    .envText{font-size:26px}
    .envelope{height:320px}
  }
</style>
</head>

<body>
  <div class="bokeh" aria-hidden="true"></div>

  <div class="snow" aria-hidden="true">
    <!-- mehr Flocken -->
    <span class="flake" style="left:5%;  animation-duration:9s;  animation-delay:0s;"></span>
    <span class="flake" style="left:12%; animation-duration:11s; animation-delay:1s; width:4px;height:4px;"></span>
    <span class="flake" style="left:18%; animation-duration:10s; animation-delay:2s;"></span>
    <span class="flake" style="left:26%; animation-duration:13s; animation-delay:.5s; width:5px;height:5px;"></span>
    <span class="flake" style="left:34%; animation-duration:9.5s; animation-delay:1.4s;"></span>
    <span class="flake" style="left:40%; animation-duration:12s; animation-delay:2.2s; width:4px;height:4px;"></span>
    <span class="flake" style="left:48%; animation-duration:10.5s; animation-delay:0.8s;"></span>
    <span class="flake" style="left:55%; animation-duration:14s; animation-delay:1.8s; width:5px;height:5px;"></span>
    <span class="flake" style="left:62%; animation-duration:9.8s; animation-delay:2.6s;"></span>
    <span class="flake" style="left:70%; animation-duration:12.6s; animation-delay:1.1s; width:4px;height:4px;"></span>
    <span class="flake" style="left:78%; animation-duration:11.4s; animation-delay:2.0s;"></span>
    <span class="flake" style="left:86%; animation-duration:13.4s; animation-delay:.7s; width:5px;height:5px;"></span>
    <span class="flake" style="left:93%; animation-duration:10.2s; animation-delay:1.6s;"></span>
    <span class="flake" style="left:8%;  animation-duration:15s; animation-delay:2.8s; width:4px;height:4px;"></span>
    <span class="flake" style="left:22%; animation-duration:14.5s; animation-delay:3.0s;"></span>
    <span class="flake" style="left:52%; animation-duration:16s; animation-delay:2.4s; width:4px;height:4px;"></span>
    <span class="flake" style="left:74%; animation-duration:15.2s; animation-delay:3.2s;"></span>
    <span class="flake" style="left:88%; animation-duration:16.5s; animation-delay:2.9s; width:4px;height:4px;"></span>
  </div>

  <div class="ornaments" aria-hidden="true">
    <div class="orn one"></div>
    <div class="orn two"></div>
    <div class="orn three"></div>
  </div>

  <div class="lights" aria-hidden="true">
    <div class="wire"></div>
    <span class="bulb" style="left:2%"></span>
    <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
    <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
    <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
    <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
  </div>

  <!-- üîà Audio (startet per Klick) -->
  <audio id="bgm" preload="auto" loop>
    <source src="assets/weihnachtsmusik.mp3" type="audio/mpeg">
  </audio>

  <div class="wrap">
    <header>
      <img src="assets/contaxx-logo.png" alt="contaxX Logo">
    </header>

    <div class="stage">
      <div class="scene" id="scene">
        <div class="envelopeWrap" id="envWrap">
          <!-- Andeutung Karte -->
          <div class="peek" id="peek">
            <div class="peekMark">Frohe Weihnachten</div>
          </div>

          <!-- Kuvert -->
          <div class="envelope" id="envelope" aria-label="Weihnachtspost √∂ffnen">
            <div class="flap"></div>
            <div class="fold"></div>

            <div class="ribbon" aria-hidden="true">
              <div class="loop left"></div>
              <div class="loop right"></div>
              <div class="knot"></div>
              <div class="tail left"></div>
              <div class="tail right"></div>
            </div>

            <div class="envText">Weihnachtspost f√ºr Sie</div>
          </div>

          <div class="hint">Zum √ñffnen tippen</div>
        </div>

        <!-- Finale Karte (allein) -->
        <div class="cardOnly" id="cardOnly" role="region" aria-label="Weihnachtskarte">
          <div class="cardInner">
            <div class="title">Frohe Weihnachten</div>
            <div class="sub">
              Zum Jahresausklang m√∂chten wir uns herzlich f√ºr Ihr Vertrauen und die angenehme Zusammenarbeit bedanken.
              Wir freuen uns darauf, Sie auch im kommenden Jahr verl√§sslich begleiten zu d√ºrfen.
            </div>

            <div class="grid">
              <div class="photo">
                <img src="assets/buero-weihnacht.png" alt="contaxX B√ºro weihnachtlich">
              </div>

              <div class="letter">
                <h2>Unsere W√ºnsche f√ºr Sie</h2>
                <p>Erholsame Feiertage, Zeit f√ºr die wichtigen Dinge und einen gelungenen Start ins neue Jahr.</p>
                <p>F√ºr 2026 w√ºnschen wir Ihnen Gesundheit, Zuversicht und wirtschaftlichen Erfolg.</p>
                <p style="margin-bottom:0;">Herzliche Gr√º√üe<br><strong>Ihr contaxX-Team</strong></p>
              </div>
            </div>

            <footer>contaxX Steuerberatungsgesellschaft mbH</footer>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="sound" id="soundBtn">
    Ton: <span id="soundState">Aus</span>
    <small>(startet beim √ñffnen)</small>
  </div>

<script>
  const scene = document.getElementById("scene");
  const envelope = document.getElementById("envelope");
  const bgm = document.getElementById("bgm");
  const soundBtn = document.getElementById("soundBtn");
  const soundState = document.getElementById("soundState");

  let hasRun = false;
  let soundOn = false;

  async function tryPlay(){
    try{
      await bgm.play();
      soundOn = true;
      soundState.textContent = "An";
    }catch(e){
      // Browser blockt ‚Äì dann bleibt Ton aus, User kann per Button aktivieren.
      soundOn = false;
      soundState.textContent = "Aus";
    }
  }

  function stopMusic(){
    bgm.pause();
    bgm.currentTime = 0;
    soundOn = false;
    soundState.textContent = "Aus";
  }

  function toggleMusic(){
    if(soundOn){
      bgm.pause();
      soundOn = false;
      soundState.textContent = "Aus";
    }else{
      tryPlay();
    }
  }

  soundBtn.addEventListener("click", (ev) => {
    ev.stopPropagation();
    toggleMusic();
  });

  envelope.addEventListener("click", async () => {
    if(hasRun) return;
    hasRun = true;

    // Musik beim ersten Klick starten (Autoplay-konform)
    await tryPlay();

    // Sequenz: Schleife l√∂st sich -> Kuvert √∂ffnet -> Karte "blitzt" -> Reveal Karte
    scene.classList.add("phase-untie");

    setTimeout(() => {
      scene.classList.add("phase-open");
    }, 450);

    setTimeout(() => {
      scene.classList.add("phase-peek");
    }, 1050);

    setTimeout(() => {
      scene.classList.add("phase-reveal");
    }, 1850);
  });
</script>
</body>
</html>
